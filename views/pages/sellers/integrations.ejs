<div class="container">
    <div class="box">
        <p class="has-text-left"><img width="200" src="<%=imgurl%>/images/sellers/<%=seller.logo%>" /></p>
        <hr>
        <div class="tabs is-toggle is-fullwidth o-x-h">
            <ul>
              <li>
                <a>
                  <p class="has-text-centered" id="dafiti"><img src="/images/dafiti.png" /></p>
                </a>
              </li>
              <li>
                <a>
                   <p class="has-text-centered" id="mercadolibre"><img src="/images/mercadolibre.png" /></p>
                </a>
              </li>
              <li>
                <a>
                  <p class="has-text-centered" id="linio"><img src="/images/linio.png" /></p>
                </a>
              </li>
              <li>
                <a>
                  <p class="has-text-centered" id="woocommerce"><img src="/images/wooCommerce.png" /></p>
                </a>
              </li>
            </ul>
        </div>
        <% let dafiti = null, mercadolibre = null, linio = null, woocommerce = null; %>
        <%if(integrations.length>0){%>
            <% dafiti=integrations.filter(data => data.channel=='dafiti');%>
            <% linio=integrations.filter(data => data.channel=='linio');%>
            <% mercadolibre=integrations.filter(data => data.channel=='mercadolibre');%>
            <% woocommerce=integrations.filter(data => data.channel=='woocommerce');%>
        <%}%>
          <div class="setup dafiti">
            <form method="POST" action="/integration/set/<%=seller.id%>/dafiti" id="dafiti-form">
                <div class="container">
                        <div class="field">
                        <label class="label">Usuario Dafiti</label>
                        <div class="control has-icons-left">
                        <input class="input" type="text" name="user" placeholder="Usuario de Conexión" required <%if(dafiti!==null && dafiti.length>0){%>value="<%=dafiti[0].user%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-user-circle' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                        <label class="label">Clave de API</label>
                        <div class="control has-icons-left">
                            <input class="input" type="text" name="key" placeholder="Llave del API" required <%if(dafiti!==null &&  dafiti.length>0){%>value="<%=dafiti[0].key%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-key' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                            <label class="label">URL Petición</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="url" placeholder="Url de Petición" required <%if(dafiti!==null && dafiti.length>0){%>value="<%=dafiti[0].url%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                            </div>
                        <br>
                        <div class="control is-right">
                            <button type="submit" class="button is-dark">Aplicar Cambios</button>
                        </div>
                </div>
            </form>
          </div>
          <div class="setup is-hidden linio">
            <form method="POST" action="/integration/set/<%=seller.id%>/linio" id="linio-form">
                <div class="container">
                        <div class="field">
                        <label class="label">Usuario Linio</label>
                        <div class="control has-icons-left">
                        <input class="input" type="text" name="user" placeholder="Usuario de Conexión" required <%if(linio!==null && linio.length>0){%>value="<%=linio[0].user%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-user-circle' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                        <label class="label">Clave de API</label>
                        <div class="control has-icons-left">
                            <input class="input" type="text" name="key" placeholder="Llave del API" required <%if(linio!==null && linio.length>0){%>value="<%=linio[0].key%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-key' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                            <label class="label">URL Petición</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="url" placeholder="Url de Petición" required <%if(linio!==null && linio.length>0){%>value="<%=linio[0].url%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                            </div>
                        <br>
                        <div class="control is-right">
                            <button type="submit" class="button is-dark">Aplicar Cambios</button>
                        </div>
                </div>
            </form>
        </div>
        <div class="setup is-hidden mercadolibre">            
            <form method="POST" action="/integration/set/<%=seller.id%>/mercadolibre" id="meli-form">
                <div class="container">
                        <div class="field">
                        <label class="label">Client Id</label>
                        <div class="control has-icons-left">
                        <input class="input" type="text" name="user" placeholder="Id de Cliente" required <%if(mercadolibre!==null && mercadolibre.length>0){%>value="<%=mercadolibre[0].user%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-user-circle' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                        <label class="label">Client Secret</label>
                        <div class="control has-icons-left">
                            <input class="input" type="text" name="key" placeholder="Clave de API" required <%if(mercadolibre!==null && mercadolibre.length>0){%>value="<%=mercadolibre[0].key%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-key' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                            <label class="label">Access Token</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="url" placeholder="Token de Acceso" required <%if(mercadolibre!==null && mercadolibre.length>0){%>value="<%=mercadolibre[0].url%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">API Token</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="secret" placeholder="Clave de API" required <%if(mercadolibre!==null && mercadolibre.length>0){%>value="<%=mercadolibre[0].secret%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                        </div>
                        <br>
                        <div class="control is-right">
                            <button type="submit" class="button is-dark">Aplicar Cambios</button>
                        </div>
                </div>
            </form>
        </div>
        <div class="setup is-hidden woocommerce">
            <form method="POST" action="/integration/set/<%=seller.id%>/woocommerce" id="woocommerce-form">
                <div class="container">
                        <div class="field">
                        <label class="label">Consumer key</label>
                        <div class="control has-icons-left">
                            <input class="input" type="text" name="key" placeholder="Consumer key" required <%if(woocommerce!==null &&  woocommerce.length>0){%>value="<%=woocommerce[0].key%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-key' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                        <label class="label">Consumer secret</label>
                        <div class="control has-icons-left">
                            <input class="input" type="text" name="secret" placeholder="Consumer secret" required <%if(woocommerce!==null &&  woocommerce.length>0){%>value="<%=woocommerce[0].secret%>"<%}%>/>
                            <span class="icon is-small is-left">
                            <i class='bx bx-key' ></i>
                            </span>
                        </div>
                        </div>
                        <div class="field">
                            <label class="label">URL Petición</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="url" placeholder="Url de Petición" required <%if(woocommerce!==null && woocommerce.length>0){%>value="<%=woocommerce[0].url%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Versión</label>
                            <div class="control has-icons-left">
                                <input class="input" type="text" name="version" placeholder="Versión" required <%if(woocommerce!==null && woocommerce.length>0){%>value="<%=woocommerce[0].version%>"<%}%>/>
                                <span class="icon is-small is-left">
                                    <i class='bx bx-world'></i>
                                </span>
                            </div>
                        </div>
                        <br>
                        <div class="control is-right">
                            <button type="submit" class="button is-dark">Aplicar Cambios</button>
                        </div>
                </div>
            </form>
          </div>
    </div>
</div>
<script>
    live('ul li','click',e=>{
        let group = e.target.parentNode.id;
        let blocks= document.querySelectorAll('.setup');

        for(let b of blocks){
            if(hasClass(b,group)){
                removeClass(b,'is-hidden');
            }else{
                addClass(b,'is-hidden');
            }
        }
    });
</script>
